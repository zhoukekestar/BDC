{"version":3,"sources":["node_modules/trim/index.js","node_modules/process/browser.js","node_modules/pinyin-utils/index.js","node_modules/mdbg/lib/get.js","node_modules/mdbg/index.js","node_modules/hanzi-to-pinyin/index.js","node_modules/pinyin-split/index.js","node_modules/pinyin-or-hanzi/index.js","node_modules/pinyin-convert/index.js","index.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","convert","require","split","utils","proxy","localStorage","getItem","htmlIt","han","pinyin","html","py","multiple","numberToMark","window","showSingleWorld","word","tone","replace","callback","cacheData","showDialog","body","url","encodeURIComponent","method","headers","fetch","cache","JSON","stringify","then","response","text","textBody","match","doc","document","implementation","createHTMLDocument","innerHTML","querySelector","dataset","gif","src","setItem","catch","sDialog","img","audiosrc","audio","Audio","autoplay","play","interval","setInterval","createElement","classList","add","appendChild","onclick","remove","style","display","clearInterval","u","target","nodeName","parentNode","location","search","decodeURIComponent","filter","item","trim","numbered","res","map","alert","forEach","toLowerCase","from","Set","console","log"],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.map","sourceRoot":"..","sourcesContent":["\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict'\n\nconst trim = require('trim')\n\nconst codepointToUnicode = codepoint => {\n\tif (typeof codepoint === 'string') {\n\t\tcodepoint = codepoint.replace('U+', '')\n\t\t\n\t\tif (!/^0x/.test(codepoint)) {\n\t\t\tcodepoint = '0x' + codepoint\n\t\t}\n\t}\n\n\treturn String.fromCodePoint(codepoint)\n}\n\nconst capitalize = text => {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\nconst vovels = {\n\t\"a\": ['ā', 'á', 'ǎ', 'à'],\n\t\"e\": ['ē', 'é', 'ě', 'è'],\n\t\"i\": ['ī', 'í', 'ǐ', 'ì'],\n\t\"o\": ['ō', 'ó', 'ǒ', 'ò'],\n\t\"u\": ['ū', 'ú', 'ǔ', 'ù'],\n\t\"ü\": ['ǖ', 'ǘ', 'ǚ', 'ǜ'],\n\t\"m\": ['m̄', 'ḿ', 'm̌', 'm̀'],\n\t\"n\": ['n̄', 'ń', 'ň', 'ǹ']\n}\n\nconst getToneNumber = text => {\n\ttext = text.toLowerCase()\n\n\tconst toneNumberRegex = /[a-zü](\\d)/\n\tif (toneNumberRegex.test(text)) {\n\t\treturn parseInt(text.match(toneNumberRegex)[1])\n\t}\n\n\tfor (let v in vovels) {\n\t\tfor (var i = 0; i < vovels[v].length; i++) {\n\t\t\tif (text.match(vovels[v][i])) {\n\t\t\t\treturn i + 1\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 5\n}\n\nconst removeTone = text => {\n\t// remove tone from pinyin with tone marks\n\tfor (let i in vovels) {\n\t\tfor (let t of vovels[i]) {\n\t\t\tif (text.match(t)) {\n\t\t\t\treturn text.replace(t, i)\n\t\t\t}\n\t\t}\n\t}\n\n\t// remove tone from pinyin with tone numbers\n\treturn text.replace(/\\d/g, '')\n}\n\nconst markToNumber = (syllables, fithTone = true) => {\n\tconst process = pinyin => {\n\t\tif (trim(pinyin).length === 0) return pinyin\n\t\tif (fithTone) {\n\t\t\treturn removeTone(pinyin) + getToneNumber(pinyin)\n\t\t} else {\n\t\t\tconst tone = getToneNumber(pinyin)\n\t\t\treturn tone === 5 ? removeTone(pinyin) : removeTone(pinyin) + tone\n\t\t}\n\t}\n\n\tif (Array.isArray(syllables)) {\n\t\treturn syllables.map(process)\n\t} else {\n\t\treturn process(syllables)\n\t}\n}\n\nconst numberToMark = syllables => {\n\tconst process = pinyin => {\n\t\tif (trim(pinyin).length === 0) return pinyin\n\n\t\tconst tone = getToneNumber(pinyin)\n\n\t\tpinyin = removeTone(pinyin)\n\t\n\t\tif (tone !== 5) {\n\t\t\tconst matchedNM = pinyin.match(/^[nm]$/)\n\t\t\tif (matchedNM) {\n\t\t\t\tconst letter = matchedNM[matchedNM.length - 1]\n\t\t\t\tpinyin = pinyin.replace(letter, vovels[letter][tone - 1])\n\t\t\t} else {\n\t\t\t\tconst matchedVovels = pinyin.match(/[aeiouü]/g)\n\t\t\t\tif (matchedVovels) {\n\t\t\t\t\tlet vovel = matchedVovels[matchedVovels.length-1]\n\t\t\n\t\t\t\t\tif (pinyin.match('ou')) vovel = 'o'\n\t\t\t\t\tif (pinyin.match('a')) vovel = 'a'\n\t\t\t\t\tif (pinyin.match('e')) vovel = 'e'\n\t\t\n\t\t\t\t\tpinyin = pinyin.replace(vovel, vovels[vovel][tone-1])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn pinyin\n\t}\n\n\tif (Array.isArray(syllables)) {\n\t\treturn syllables.map(process)\n\t} else {\n\t\treturn process(syllables)\n\t}\n}\n\nmodule.exports = {codepointToUnicode, capitalize, vovels, getToneNumber, removeTone, markToNumber, numberToMark}\n","'use strict'\n\nconst pinyinUtils = require('pinyin-utils')\n\nconst get = cedict => key => {\n  let entry = cedict[key]\n  if (!entry) return\n  \n  entry = JSON.parse(JSON.stringify(entry))\n\n  const mapClassifiers = cls => {\n    cls = cls.substr(3).split(',')\n    return cls.reduce((o, cl) => {\n      const parts = cl.split('[')\n      const characters = parts[0].split('|')\n      const pinyin = parts[1].split(']')[0]\n      o[pinyin] = {\n        traditional: characters[0],\n        simplified: characters[1],\n        mandarin: pinyin.split(' ').map(pinyinUtils.numberToMark).join(' '),\n        definition: cedict[characters[0]].d[pinyin].find(def => def.substr(0, 14) === 'classifier for')\n      }\n      return o\n    }, {})\n  }\n\n  const mapDefinitions = defs => {\n    for (key in defs) {\n      const d = {}\n      const classifiers = defs[key].find(def => def.substr(0, 3) === 'CL:')\n      d.mandarin = key.split(' ').map(pinyinUtils.numberToMark).join(' ')\n      d.definitions = defs[key].filter(def => def !== classifiers)\n      if (classifiers) {\n        d.classifiers = mapClassifiers(classifiers)\n      }\n      defs[key] = d\n    }\n    return defs\n  }\n\n  const data = {\n    traditional: entry.t || key,\n    simplified: entry.s || key,\n    data: mapDefinitions(entry.d)\n  }\n\n  return data\n}\n\nmodule.exports = get\n","const cedict = require('./data/cedict')\nconst get = require('./lib/get')(cedict)\n\n// TODO: support querying words by the definitions\n// const query = require('./lib/query')(cedict)\n\nmodule.exports = { get }\n","'use strict'\n\nconst mdbg = require('mdbg')\n\nconst getTokens = async text => {\n\tlet list = []\n\tlet index = 0\n\twhile (index < text.length) {\n\t\tlet word = text.substr(index)\n\t\tlet count = word.length\n\t\tlet wordFound = false\n\t\twhile (count >= 0) {\n\t\t\tword = word.substr(0, count)\n\t\t\tconst entry = mdbg.get(word)\n\t\t\tif (entry) {\n\t\t\t\tindex += count - 1\n\t\t\t\tentry.word = word\n\t\t\t\tlist.push(entry)\n\t\t\t\twordFound = true\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcount--\n\t\t}\n\t\tif (!wordFound) {\n\t\t\tif (typeof list[list.length - 1] === 'string') {\n\t\t\t\tlist[list.length - 1] += text[index]\n\t\t\t} else {\n\t\t\t\tlist.push(text[index])\n\t\t\t}\n\t\t}\n\t\tindex++\n\t}\n\treturn list\n}\n\nconst convert = async (text, numbered) => {\n\tconst tokens = await getTokens(text)\n\treturn tokens.map(token => {\n\t\tif (typeof token === 'string') {\n\t\t\treturn token\n\t\t} else {\n\t\t\tlet pinyins = Object.keys(token.data)\n\t\t\tif (numbered) {\n\t\t\t\treturn pinyins\n\t\t\t} else {\n\t\t\t\treturn pinyins.map(pinyin => token.data[pinyin].mandarin)\n\t\t\t}\n\t\t}\n\t})\n}\n\nmodule.exports = convert\n","'use strict'\n\nconst wordsData = require('./words.json')\nconst utils = require('pinyin-utils')\n\nlet allWords = []\n\nfor (let wordList in wordsData) {\n\tallWords = allWords.concat(wordsData[wordList])\n}\n\n// Add all four tones\nfor (var i = 1; i <= 4; i++) {\n\tallWords = allWords.concat(allWords.map((word) => utils.numberToMark(word + i)))\n}\n\n// Add capitalized words\nallWords = allWords.concat(allWords.map((word) => utils.capitalize(word)))\n\n// Sort them by having the longest ones on the top\nallWords = allWords.sort((a, b) => b.length - a.length)\n\nlet doNotMatch = []\nlet recursionCount = 0\n\nconst inDoNotMatch = (index, word) => {\n  for (let item of doNotMatch) {\n    if (item.index === index && item.word === word) {\n      return true\n    }\n  }\n  return false\n}\n\nconst reAllowed = /^[a-züāáǎàēéěèīíǐìōóǒòūúǔùǖǘǚǜ]+$/i\n\nconst matchWords = (text, keepSpaces, rc, debug) => {\n  if (debug) {\n\t\tconsole.log(`DEBUG> Recursion count: '${recursionCount}'`)\n\t\tconsole.log(`DEBUG> do not match: '${doNotMatch.map((item) => item.index + ':' + item.word).join()}'`)\n\t}\n\n  let words = []\n  let i = 0\n\n  while (i < text.length) {\n    let wordFound = false\n\n    if (!reAllowed.test(text[i])) {\n\t\t\tif (keepSpaces) words.push({index: i, word: text[i]})\n      i ++\n      wordFound = true\n    }\n\n    for (let word of allWords) {\n      if (inDoNotMatch(i, word)) {\n        if (debug) console.log('DEBUG> Skipped:', word)\n        continue\n      }\n\n      if (text.substr(i, word.length) === word) {\n        if (debug) console.log('DEBUG> Found word:', word)\n\n        const item = {index: i, word: word}\n        i += word.length\n\n        if (i < text.length) {\n          const tone = text[i]\n          if (/[1-5]/.test(tone)) {\n            if (debug) console.log('DEBUG> Found tone:', tone)\n            item.tone = tone\n            i ++\n          }\n        }\n\n        words.push(item)\n        wordFound = true\n        break\n      }\n    }\n\n    if (!wordFound) {\n      const lastItem = words[words.length - 1]\n      if (lastItem) {\n        doNotMatch.push(lastItem)\n        if (debug) console.log('DEBUG> Adding word to doNotMatch list:', lastItem.word)\n        if (rc > 0) {\n          recursionCount ++\n          return matchWords(text, --rc, debug)\n        }\n        if (debug) console.log(`DEBUG> Max recursion count exceeded`)\n        return null\n      } else {\n        if (debug) console.log('DEBUG> Error on line 94!')\n        return null\n      }\n    }\n  }\n\n  if (debug) console.log(`DEBUG> Text was sucessfully splitted`)\n  return words\n}\n\nconst split = (text, options = {}) => new Promise((yay, nay) => {\n  doNotMatch = []\n\n\tconst keepSpaces = options.keepSpaces || false\n\tconst maxRecursion = options.maxRecursion || 5\n\tconst debug = options.debug || false\n\n  let words = matchWords(text, keepSpaces, maxRecursion, debug)\n\n  if (words) {\n    words = words.map((item) => item.word + (item.tone?item.tone:''))\n    yay(words)\n  } else {\n    nay('Failed to split words')\n  }\n})\n\nmodule.exports = split\n","'use strict'\n\nconst utils = require('pinyin-utils')\n\nconst ranges = [\n\t{\n\t\tstart: parseInt('2E80', 16),\n\t\tend: parseInt('2FD5', 16)\n\t},\n\t{\n\t\tstart: parseInt('3400', 16),\n\t\tend: parseInt('4DBF', 16)\n\t},\n\t{\n\t\tstart: parseInt('4E00', 16),\n\t\tend: parseInt('9FCC', 16)\n\t}\n]\n\nconst check = async text => {\n\tif (/[a-zA-ZüÜ]+[1-5]/.test(text)) {\n\t\treturn 'pinyin-numbered'\n\t} else {\n\t\tfor (let i in utils.vovels) {\n\t\t\tfor (let tone of utils.vovels[i]) {\n\t\t\t\tif (text.indexOf(tone) > 0) {\n\t\t\t\t\treturn 'pinyin-marked'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let i = 0; i < text.length; i++) {\n\t\tlet code = text[i].charCodeAt(0)\n\t\tfor (let range of ranges) {\n\t\t\tif (code >= range.start && code <= range.end) {\n\t\t\t\treturn 'mandarin'\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 'other'\n}\n\nmodule.exports = check\n","'use strict'\n\nconst hanziToPinyin = require('hanzi-to-pinyin')\nconst splitPinyin = require('pinyin-split')\nconst pinyinOrHanzi = require('pinyin-or-hanzi')\nconst utils = require('pinyin-utils')\n\nconst convertMandarin = async (text, options = {}) => {\n\tlet lastType = null\n\treturn (await hanziToPinyin(text, options.numbered)).reduce((list, token) => {\n\t\tconst lastIndex = list.length - 1\n\t\tif (typeof token === 'string') { // token is a string\n\t\t\tif (typeof list[lastIndex] === 'string') {\n\t\t\t\tlist[lastIndex] += token\n\t\t\t} else {\n\t\t\t\tlist.push(token)\n\t\t\t}\n\t\t} else if (token.length === 1) { // token is one word\n\t\t\tconst word = options.segmented ? token[0].replace(/\\s/g, '') : token[0]\n\t\t\tif (typeof list[lastIndex] === 'string') {\n\t\t\t\tif (lastType !== 'string') {\n\t\t\t\t\tlist[lastIndex] += ' '\n\t\t\t\t}\n\t\t\t\tlist[lastIndex] += word\n\t\t\t} else {\n\t\t\t\tif (list.length === 0) {\n\t\t\t\t\tlist.push(word)\n\t\t\t\t} else {\n\t\t\t\t\tlist.push(' ' + word) // add space after token\n\t\t\t\t}\n\t\t\t}\n\t\t} else { // token has multiple pinyins\n\t\t\tif (typeof list[lastIndex] === 'string') {\n\t\t\t\tlist[lastIndex] += ' ' // add space before token\n\t\t\t}\n\t\t\tlist.push(token)\n\t\t}\n\t\tlastType = typeof token\n\t\treturn list\n\t}, [])\n}\n\nconst convertPinyin = async (text, type, options) => {\n\toptions.keepSpaces = options.segmented\n\tlet words = await splitPinyin(text, options)\n\tif (options.numbered && type !== 'pinyin-numbered') {\n\t\twords = utils.markToNumber(words)\n\t}\n\telse if (options.marked && type !== 'pinyin-marked') {\n\t\twords = utils.numberToMark(words)\n\t}\n\telse if (!options.numbered && !options.numbered) {\n\t\tif (type === 'pinyin-marked') {\n\t\t\twords = utils.markToNumber(words)\n\t\t}\n\t\tif (type === 'pinyin-numbered') {\n\t\t\twords = utils.numberToMark(words)\n\t\t}\n\t}\n\treturn words.join(options.segmented ? '' : ' ')\n}\n\nconst convert = async (text, options = {}) => {\n\tconst type = await pinyinOrHanzi(text)\n\tif (type === 'other') {\n\t\treturn text\n\t}\n\tif (type === 'mandarin') {\n\t\treturn convertMandarin(text, options)\n\t}\n\tif (type.substr(0, 6) ===  'pinyin') {\n\t\treturn convertPinyin(text, type, options)\n\t}\n}\n\nmodule.exports = convert\n\n// convert('我的猫喜欢吃苹果 1')\n// .then(data => console.log(JSON.stringify(data)))\n// .catch(console.error)\n\n// convert('My cat likes to eat apples: 《我的猫喜欢吃苹果》.')\n// .then(data => console.log(JSON.stringify(data)))\n// .catch(console.error)\n\n// convert('My cat likes to eat apples: 《我的猫喜欢吃苹果》.', { segmented: true })\n// .then(data => console.log(JSON.stringify(data)))\n// .catch(console.error)\n\n// convert('wǒ de māo xǐhuan chī píngguǒ')\n// .then(data => console.log(JSON.stringify(data)))\n// .catch(console.error)\n\n// convert('wǒ de māo xǐhuan chī píngguǒ', { segmented: true })\n// .then(data => console.log(JSON.stringify(data)))\n// .catch(console.error)\n","const convert = require('pinyin-convert');\nconst split = require('pinyin-split')\nconst utils = require('pinyin-utils')\n\n\nvar proxy = localStorage.getItem('pinyinProxy') || 'https://common.toomao.com/proxy';\n\nvar htmlIt = function(han, pinyin) {\n  var html = '<p class=\"pinyin\"><u><b></b><i></i></u>';\n  for (var i = 0, len = han.length; i < len; i++) {\n\n    if (han[i] === '@') {\n      html += '<br><u><b></b><i></i></u>'\n    } else {\n      var py = pinyin[i];\n      py = py[0];\n      var multiple = pinyin[i].length > 1 ? true : false;\n      html += `<u data-n=\"${i}\" data-pinyins=\"${pinyin[i]}\" data-pinyin=\"${py}\" class=\"${multiple ? \"multiple-pinyin\" : \"\"}\"><b>${utils.numberToMark(py)}</b><i>${han[i]}</i></u>`;\n    }\n  }\n  html += '</p>'\n  return html;\n}\n\n /*查询单个*/\n window.showSingleWorld = function(word, tone) {\n  tone = tone.replace('5', '');\n  word = word[0];\n  if (proxy === '') {\n    return callback && callback('Proxy is null. Please set pinyinProxy by localStorage.getItem(\"pinyinProxy\") at first.')\n  }\n\n  var cacheData = localStorage.getItem('SW_' + word);\n  if (cacheData) {\n    showDialog(cacheData, 'http://xh.5156edu.com/xhzdmp3abc/' + tone + '.mp3', word);\n    return;\n  }\n\n  var body = {\n    url: 'http://hanyu.baidu.com/s?wd=' + encodeURIComponent(word),\n    method: 'GET',\n    headers: {\n      'Accept':'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n      'User-Agent':'Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1'\n    }\n  }\n  fetch(proxy, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8'\n    },\n    cache: 'force-cache',\n    body: JSON.stringify(body)\n  }).then(response => {\n\n    response.text().then(function (text) {\n      window.text = text;\n      window.textBody = text.match(/<body class=\"module\" id=\"wise-word-body\" data-prop=\"\" data-name=\"\">([\\s\\S]*)<\\/body>/)[1];\n      window.doc = document.implementation.createHTMLDocument(\"doc\");\n      doc.body.innerHTML = textBody;\n\n      // console.log(doc.querySelector('#word_bishun').dataset.gif);\n      // console.log(doc.querySelector('#pinyin a').getAttribute('url'));\n\n      cacheData = doc.querySelector('#word_bishun');\n      cacheData = (cacheData && cacheData.dataset.gif) || (cacheData && cacheData.dataset.src) || '';\n      localStorage.setItem('SW_' + word, cacheData);\n\n      showDialog(cacheData, 'http://xh.5156edu.com/xhzdmp3abc/' + tone + '.mp3', word);\n    }).catch(e => {\n      showDialog('', 'http://xh.5156edu.com/xhzdmp3abc/' + tone + '.mp3', word);\n    })\n\n  }).catch(e => {\n    showDialog('', 'http://xh.5156edu.com/xhzdmp3abc/' + tone + '.mp3', word);\n  })\n\n}\n\n/* 显示读音弹框 */\nvar sDialog = null;\nwindow.showDialog = function(img, audiosrc, text) {\n  // alert(`${img}#${audiosrc}#${text}`);\n  var audio = new Audio(audiosrc);\n  audio.autoplay = true;\n  audio.play();\n  var interval = setInterval(() => {\n    audio.play();\n  }, 3000);\n\n  if (!sDialog) {\n    sDialog = document.createElement('div');\n    sDialog.classList.add('dialog');\n    document.body.appendChild(sDialog);\n\n    sDialog.onclick = function() {\n      sDialog.classList.remove('show');\n      setTimeout(function(){\n        sDialog.style.display = 'none';\n        clearInterval(sDialog.interval);\n        // sDialog.audio.remove();\n      }, 500)\n    }\n  }\n\n  sDialog.audio = audio;\n  sDialog.interval = interval;\n\n  if (img) {\n    sDialog.innerHTML = `\n      <div class='content'>\n        <img src='${img}' />\n      </div>\n    `;\n  } else {\n    sDialog.innerHTML = `\n      <div class='content'>\n        <h1>${text}</h1>\n      </div>\n    `;\n  }\n\n  sDialog.style.display = 'block';\n  setTimeout(function(){\n    sDialog.classList.add('show');\n  });\n}\n\n/*点击单个字母*/\ndocument.querySelector('#res').onclick = function(e) {\n  var u = e.target;\n  while (u.nodeName !== 'U') {\n    u = u.parentNode;\n    if (u === document.body) return;\n  }\n  showSingleWorld(u.querySelector('i').innerHTML, u.dataset.pinyin);\n}\n\n\n// 初始化代码\n!(() => {\n  var text = (text = location.search.match(/text=([^&=]*)/)) && text[1];\n  if (text) {\n    text = decodeURIComponent(text);\n    var han = text.split('').filter(item => item.trim());\n\n    convert(text.replace(/，/g, ' ， ').replace(/。/g, ' 。 ').replace(/@/g, ' @ '), {\n      numbered: true,\n    }).then(res => {\n      var pinyin = [];\n      res.map(item => {\n        if (typeof item === 'string') {\n          pinyin = pinyin.concat(item.split(' ').filter(item => item.trim()));\n        } else if (typeof item === 'object') {\n          pinyin.push(item);\n        } else {\n          alert('库解析异常');\n        }\n      });\n\n      pinyin.forEach((py, i) => {\n        py = typeof py === 'string' ? [py] : py;\n        py = py.map(item => item.toLowerCase());\n        py = Array.from(new Set(py));\n        pinyin[i] = py;\n      });\n\n      if (han.length != pinyin.length) {\n        console.log(han, pinyin)\n        alert('汉字和拼音对接错误');\n        return;\n      }\n\n      // console.log(han, pinyin);\n      // console.log(htmlIt(han, pinyin));\n\n      // console.log(JSON.stringify(pinyin));\n      document.querySelector('#res').innerHTML = htmlIt(han, pinyin);\n    });\n  }\n})();\n\n"]}